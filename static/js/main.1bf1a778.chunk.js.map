{"version":3,"sources":["components/ProductCard/constants.js","components/ProductCard/index.jsx","components/Header/index.jsx","utils.js","components/Categories/constants.js","components/Categories/index.jsx","components/ProductCards/index.jsx","components/Loading/index.jsx","components/InfoText/index.jsx","App.js","index.js"],"names":["indicatorsTranslations","calories","protein","fat","carbs","ProductCard","id","img","title","indicators","weight","incrItem","decrItem","countInOrder","className","alt","src","Object","keys","map","ind","onClick","disabled","Header","num","orderList","children","products","onBasketClick","isBasketOpen","total","prId","count","product","find","forEach","toFixed","style","fontSize","color","categoriesTranslations","all","breakfasts","salad","soup","chicken","meat","fish","sidedishes","dessert","drinks","sets","barbecue","freeze","Categories","data","active","category","name","ProductCards","Loading","InfoText","ALL_MENU","stopListCategories","App","useState","loading","setLoading","setProducts","categories","setCategories","activeCategory","setActiveCategory","setOrderList","setBasketOpen","newList","saveOrder","order","localStorage","setItem","JSON","stringify","useEffect","a","fetch","response","json","uniqueCats","Set","filter","includes","unshift","fetchMyAPI","getItem","parse","orderListKeys","items","length","itemId","filteredItems","cat","rootElement","document","getElementById","createRoot","render"],"mappings":"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","file":"static/js/main.1bf1a778.chunk.js","sourcesContent":["export const indicatorsTranslations = {\n  calories: \"Ккал\",\n  protein: \"Белки\",\n  fat: \"Жиры\",\n  carbs: \"Углеводы\"\n};\n","import \"./styles.css\";\nimport { indicatorsTranslations } from \"./constants\";\n\nexport const ProductCard = ({\n  id,\n  img,\n  title,\n  indicators,\n  weight,\n  incrItem,\n  decrItem,\n  countInOrder\n}) => {\n  return (\n    <div className=\"card\">\n      <div className=\"line\">\n        <img className=\"picture\" alt={id} src={img}></img>\n        <div className=\"indicators\">\n          {Object.keys(indicators).map((ind) => (\n            <div key={`${id}-${ind}`} className=\"indicators-line\">\n              <span>{indicatorsTranslations[ind]}</span>\n              <span>{indicators[ind]}</span>\n            </div>\n          ))}\n          <div className=\"indicators-line\">\n            <span>Вес</span>\n            <span>{weight} гр</span>\n          </div>\n        </div>\n      </div>\n      <div className=\"info\">\n        <p className=\"title\">{title}</p>\n        <div className=\"buttons\">\n          <button onClick={decrItem(id)} disabled={countInOrder === 0}>\n            −\n          </button>\n          <span>{countInOrder}</span>\n          <button onClick={incrItem(id)}>+</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import \"./styles.css\";\nimport { formatWeightSymb } from \"../../utils\";\n\nexport const Header = ({\n  orderList,\n  children,\n  products,\n  onBasketClick,\n  isBasketOpen\n}) => {\n  const total = {\n    calories: 0,\n    protein: 0,\n    fat: 0,\n    carbs: 0,\n    weight: 0\n  };\n\n  // перебор по элементам в формате [ключ, значение]\n  for (const prId in orderList) {\n    const count = orderList[prId];\n\n    const product = products.find(({ id }) => id === prId);\n\n    if (product) {\n      const { indicators } = product;\n      Object.keys(indicators).forEach((ind) => {\n        total[ind] += indicators[ind] * count;\n      });\n\n      total.weight += product.weight * count;\n    }\n  }\n\n  return (\n    <header>\n      <div className=\"header\">\n        <div className=\"indicator calories\">\n          <span className=\"value\">{total.calories}</span>\n          <span className=\"label\">Ккал</span>\n        </div>\n        <div className=\"indicators\">\n          <div className=\"indicator protein\">\n            <span className=\"value\">{total.protein}</span>\n            <span className=\"label\">Белки</span>\n          </div>\n          <div className=\"indicator fat\">\n            <span className=\"value\">{total.fat}</span>\n            <span className=\"label\">Жиры</span>\n          </div>\n          <div className=\"indicator carbs\">\n            <span className=\"value\">{total.carbs}</span>\n            <span className=\"label\">Углеводы</span>\n          </div>\n        </div>\n        <div className=\"indicator\">\n          <span className=\"value\">\n            {total.weight > 1000\n              ? (total.weight * 0.001).toFixed(1)\n              : total.weight}\n          </span>\n          <span className=\"label\">{formatWeightSymb(total.weight)}</span>\n        </div>\n        <div className=\"basket\">\n          <i\n            className={`icon icon-${isBasketOpen ? \"food\" : \"cart\"}`}\n            onClick={onBasketClick}\n            style={{ fontSize: \"30px\", color: \"white\" }}\n          ></i>\n        </div>\n      </div>\n      {children}\n    </header>\n  );\n};\n","export const formatWeight = (num) =>\n  num > 1000 ? `${num / 1000} кг` : `${num} гр`;\n\nexport const formatWeightSymb = (num) => (num > 1000 ? \"кг\" : \"грамм\");\n","export const categoriesTranslations = {\n  all: \"Все блюда\",\n  breakfasts: \"Завтраки\",\n  salad: \"Салат\",\n  soup: \"Суп\",\n  chicken: \"Птица\",\n  meat: \"Мясо\",\n  fish: \"Рыба и море\",\n  sidedishes: \"Гарниры\",\n  dessert: \"Десерт\",\n  drinks: \"Напитки\",\n  sets: \"Наборы\",\n  barbecue: \"Шашлык\",\n  freeze: \"Заморозка\"\n};\n","import \"./styles.css\";\nimport { categoriesTranslations } from \"./constants\";\n\nexport const Categories = ({ data, active, onClick }) => (\n  <ul className=\"categories\">\n    {data.map((category) => {\n      const className = `category${active === category ? \" active\" : \"\"}`;\n      return (\n        <li\n          name={category}\n          onClick={onClick(category)}\n          className={className}\n          key={category}\n        >\n          {categoriesTranslations[category]}\n        </li>\n      );\n    })}\n  </ul>\n);\n","import \"./styles.css\";\n\nexport const ProductCards = ({ children }) => (\n  <div className=\"cards\">{children}</div>\n);\n","import \"./styles.css\";\n\nexport const Loading = () => (\n  <section className=\"loading\">\n    <p>Загрузка...</p>\n  </section>\n);\n","import \"./styles.css\";\n\nexport const InfoText = ({ children }) => (\n  <div className=\"info-text\">\n    <div className=\"info-text-icon-basket\"></div>\n    <p>{children}</p>\n  </div>\n);\n","import { useState, useEffect } from \"react\";\nimport { ProductCard } from \"./components/ProductCard\";\nimport { Header } from \"./components/Header\";\nimport { Categories } from \"./components/Categories\";\nimport { ProductCards } from \"./components/ProductCards\";\nimport { Loading } from \"./components/Loading\";\nimport { InfoText } from \"./components/InfoText\";\nimport { Fonts } from \"./components/Fonts\";\n\nimport \"./styles.css\";\n\nconst ALL_MENU = \"all\";\nconst stopListCategories = [\"sets\", \"freeze\", \"barbecue\"];\n\nconst App = () => {\n  const [loading, setLoading] = useState(true);\n  const [products, setProducts] = useState(null);\n  const [categories, setCategories] = useState(null);\n  const [activeCategory, setActiveCategory] = useState(null);\n  const [orderList, setOrderList] = useState({}); // { id: count }\n  const [isBasketOpen, setBasketOpen] = useState(false);\n\n  const incrItem = (id) => () => {\n    const newList = { ...orderList };\n    newList[id] ? (newList[id] += 1) : (newList[id] = 1);\n    setOrderList(newList);\n    saveOrder(newList);\n  };\n\n  const decrItem = (id) => () => {\n    const newList = { ...orderList };\n    newList[id] -= 1;\n    if (newList[id] === 0) delete newList[id];\n    setOrderList(newList);\n    saveOrder(newList);\n  };\n\n  const saveOrder = (order) => {\n    localStorage.setItem(\"order\", JSON.stringify(order));\n  };\n\n  const filterProducts = ({ category }) =>\n    !stopListCategories.includes(category) &&\n    (category === activeCategory || activeCategory === ALL_MENU);\n\n  useEffect(() => {\n    async function fetchMyAPI() {\n      setLoading(true);\n      let response = await fetch(\n        \"https://justpilz.github.io/mkitchen-page/products.json\"\n      );\n      response = await response.json();\n\n      const uniqueCats = [\n        ...new Set(\n          response\n            .filter(({ category }) => !stopListCategories.includes(category))\n            .map(({ category }) => category)\n        )\n      ];\n      uniqueCats.unshift(ALL_MENU);\n\n      setProducts(response);\n      setCategories(uniqueCats);\n      setActiveCategory(uniqueCats[0]);\n      setLoading(false);\n    }\n\n    fetchMyAPI();\n  }, []);\n\n  useEffect(() => {\n    const order = localStorage.getItem(\"order\");\n    if (order) {\n      setOrderList(JSON.parse(order));\n    }\n  }, []);\n\n  const handleCategoryChanged = (cat) => () => {\n    setActiveCategory(cat);\n  };\n\n  const handleBasketSwitch = () => {\n    setBasketOpen(!isBasketOpen);\n  };\n\n  const orderListKeys = Object.keys(orderList);\n\n  const items = isBasketOpen\n    ? orderListKeys.length\n      ? orderListKeys.map((itemId) => products.find(({ id }) => id === itemId))\n      : []\n    : products;\n\n  const filteredItems = items?.filter(filterProducts);\n\n  return (\n    <div className=\"App\">\n      <main>\n        {loading || !categories ? (\n          <Loading />\n        ) : (\n          <>\n            <Header\n              orderList={orderList}\n              products={items}\n              onBasketClick={handleBasketSwitch}\n              isBasketOpen={isBasketOpen}\n            >\n              <Categories\n                data={categories}\n                active={activeCategory}\n                onClick={handleCategoryChanged}\n              />\n            </Header>\n\n            {filteredItems.length ? (\n              <ProductCards>\n                {filteredItems?.map((data) => (\n                  <ProductCard\n                    key={`${data.category}-${data.id}`}\n                    {...data}\n                    incrItem={incrItem}\n                    decrItem={decrItem}\n                    countInOrder={orderList[data.id] || 0}\n                  />\n                ))}\n              </ProductCards>\n            ) : (\n              <InfoText>\n                {orderListKeys.length\n                  ? \"В\\u00a0этой категории ничего не выбрано.\"\n                  : \"Корзина пуста\"}\n                <br />\n                <br />\n                Нажмите на&nbsp;\n                <i\n                  className=\"icon icon-food\"\n                  style={{ fontSize: \"20px\" }}\n                />{\" \"}\n                в&nbsp;верхней панели для&nbsp;возврата к&nbsp;меню\n                и&nbsp;добавьте что&#8209;нибудь вкусненькое.\n              </InfoText>\n            )}\n          </>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\nimport App2 from \"./Menu\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n    {/* <App2 /> */}\n  </StrictMode>\n);\n"],"sourceRoot":""}